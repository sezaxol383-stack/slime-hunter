<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Slime Hunter Mobile</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="header">
        <div class="header-left">
            <button id="btnSound" class="sound-btn" onclick="toggleSound()">üîä</button>
            <button id="btnBackpack" class="sound-btn mobile-only" onclick="toggleBackpack()">üéí</button>

            <div class="gold-display" onclick="onDevSecretClick()" style="cursor: pointer; user-select: none;">
                <img src="images/ui/coin.png" class="coin-icon" alt="Gold">
                <span id="goldCount">0</span>
            </div>

            <div id="headerInventory" class="header-inventory">
            </div>
        </div>

        <div class="nav-buttons desktop-nav">
            <button class="nav-btn active" onclick="switchTab('game')">–û—Ö–æ—Ç–∞</button>
            <button class="nav-btn" onclick="switchTab('forge')">–ö—É–∑–Ω–∏—Ü–∞</button>
            <button class="nav-btn" onclick="switchTab('shop')">–ì–∏–ª—å–¥–∏—è</button>
            <button class="nav-btn" onclick="switchTab('collection')">–ö–æ–ª–ª–µ–∫—Ü–∏—è</button>
        </div>

        <button class="menu-btn mobile-nav" onclick="toggleMenu()">‚ò∞</button>

        <div id="dropdownMenu" class="dropdown-menu">
            <button class="menu-item active" onclick="selectMobileTab('game')">‚öîÔ∏è –û—Ö–æ—Ç–∞</button>
            <button class="menu-item" onclick="selectMobileTab('forge')">üî• –ö—É–∑–Ω–∏—Ü–∞</button>
            <button class="menu-item" onclick="selectMobileTab('shop')">üí∞ –ì–∏–ª—å–¥–∏—è</button>
            <button class="menu-item" onclick="selectMobileTab('collection')">üíé –ö–æ–ª–ª–µ–∫—Ü–∏—è</button>
        </div>
    </div>

    <div class="game-container">

        <div class="sidebar desktop-only">

            <div class="panel">
                <h2>–°–æ–±—ã—Ç–∏—è</h2>
                <div id="logList"></div>
            </div>

            <div id="tutorialPanel" class="panel tutorial-panel">
                <div class="tut-header" onclick="toggleTutorial()">
                    <span id="tutTitleHeader">–û–ë–£–ß–ï–ù–ò–ï</span>
                    <span id="tutArrow">‚ñº</span>
                </div>

                <div id="tutBody" class="tut-body">
                    <div class="tutorial-character">
                        <img src="images/ui/guide_slime.png" style="width: 50px; height: 50px; object-fit: contain;">
                    </div>
                    <div class="tutorial-content">
                        <h4 id="tutTitle">–ó–∞–¥–∞–Ω–∏–µ</h4>
                        <p id="tutText">–¢–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è...</p>
                        <div class="tut-progress">
                            <div id="tutBar" class="tut-bar-fill"></div>
                        </div>
                        <div id="tutCounter" class="tut-counter">0 / 1</div>
                    </div>
                </div>
            </div>

            <div id="activeQuestPanel" class="panel tutorial-panel" style="display: none; border-color: #ffd700; box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);">
                <div class="tut-header" style="background: linear-gradient(90deg, #664400, #332200); color: #ffd700;">
                    <span>üìú –¢–ï–ö–£–©–ê–Ø –¶–ï–õ–¨</span>
                </div>
                <div class="tut-body">
                    <div class="tutorial-character">
                        <span style="font-size: 24px;">üìú</span>
                    </div>
                    <div class="tutorial-content">
                        <h4 id="actQuestTitle" style="color: #ffd700;">–ù–µ—Ç –∑–∞–¥–∞–Ω–∏—è</h4>
                        <p id="actQuestDesc" style="color: #fff;">–ó–∞–π–¥–∏—Ç–µ –≤ –≥–∏–ª—å–¥–∏—é, —á—Ç–æ–±—ã –≤–∑—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç.</p>

                        <div class="tut-progress">
                            <div id="actQuestBar" class="tut-bar-fill" style="background: #ffd700;"></div>
                        </div>
                        <div id="actQuestCounter" class="tut-counter">0 / 0</div>

                        <button id="btnClaimSidebar" onclick="claimActiveQuest()"
                                style="display: none; width: 100%; margin-top: 5px; background: #ffd700; border: none; font-weight: bold; cursor: pointer; padding: 5px; border-radius: 4px;">
                            –ó–ê–ë–†–ê–¢–¨ –ù–ê–ì–†–ê–î–£
                        </button>
                    </div>
                </div>
            </div>

        </div>

        <div id="gameScreen" class="screen active">
            <div class="main-area">
                <div class="boss-hp-wrapper">
                    <div class="hp-text"><span id="currentHp">10</span> / <span id="maxHp">10</span> HP</div>
                    <div class="hp-bar-container">
                        <div class="hp-bar-fill" id="hpFill"></div>
                    </div>
                </div>

                <div id="bossLabel" class="boss-label">‚ö†Ô∏è BOSS FIGHT ‚ö†Ô∏è</div>

                <div id="playerHpContainer" class="player-hp-container" style="display: none;">
                    <span class="heart">‚ù§Ô∏è</span><span class="heart">‚ù§Ô∏è</span><span class="heart">‚ù§Ô∏è</span>
                </div>

                <div id="ritualLayer" class="ritual-layer"></div>

                <div class="stats-overlay">–£–±–∏—Ç–æ: <span id="killCount">0</span></div>

                <div class="slime-container" id="slimeArea" onclick="clickSlime(event)">
                    <div class="slime-shadow"></div>
                    <img src="images/slimes/slime_green_1.png" class="slime-img" alt="–°–ª–∞–π–º">
                </div>

                <div id="petPanel" class="pet-panel-hud" style="display: none;">
                    <div class="pet-hud-visual">
                        <h3 id="petNameTitle">–ò–º—è –ü–∏—Ç–æ–º—Ü–∞</h3>
                        <img id="sidebarPetImg" src="images/pets/pet_blob.png">
                    </div>

                    <div class="pet-skills-grid">
                        <button id="skillSlot1" class="skill-slot" onclick="activatePetSkill(1)">
                            <img src="images/ui/skill_slash.png" class="skill-icon-img"
                                 onerror="this.style.display='none'; this.parentNode.insertAdjacentHTML('afterbegin', '<span class=\'skill-icon\'>‚öîÔ∏è</span>')">
                            <div id="skillCd1" class="skill-cooldown"></div>
                            <span id="skillTimer1" class="skill-timer"></span>
                        </button>

                        <button id="skillSlot2" class="skill-slot" onclick="activatePetSkill(2)">
                            <img src="images/ui/skill_spit.png" class="skill-icon-img"
                                 onerror="this.style.display='none'; this.parentNode.insertAdjacentHTML('afterbegin', '<span class=\'skill-icon\'>üíß</span>')">
                            <div id="skillCd2" class="skill-cooldown"></div>
                            <span id="skillTimer2" class="skill-timer"></span>
                        </button>

                        <button id="skillSlot3" class="skill-slot" onclick="activatePetSkill(3)">
                            <img src="images/ui/skill_fury.png" class="skill-icon-img"
                                 onerror="this.style.display='none'; this.parentNode.insertAdjacentHTML('afterbegin', '<span class=\'skill-icon\'>üî•</span>')">
                            <div id="skillCd3" class="skill-cooldown"></div>
                            <span id="skillTimer3" class="skill-timer"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="forgeScreen" class="screen forge-screen">
            <div class="forge-header">
                <h2 style="color: #ff5500; font-size: 24px;">üî• –í–µ–ª–∏–∫–∞—è –ö—É–∑–Ω–∏—Ü–∞ üî•</h2>
                <p style="color: #aaa; margin-top: -10px;">–ö—É–π –∂–µ–ª–µ–∑–æ, –ø–æ–∫–∞ –≥–æ—Ä—è—á–æ!</p>
            </div>
            <div id="upgradesList" class="upgrades-container"></div>
        </div>

        <div id="shopScreen" class="screen shop-screen">
            <div id="guildBoard" class="guild-board-container" style="display: none;">
                <h2 style="color: #ffd700; text-shadow: 0 0 10px #ffaa00;">üìú –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ì–∏–ª—å–¥–∏–∏</h2>
                <div id="questList" class="quest-list">
                </div>
                <div id="questTimer" style="color: #aaa; font-size: 11px; margin-top: 5px; text-align: center;">
                    –ù–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ
                </div>
            </div>

            <div class="shop-column">
                <h2>–õ–∞–≤–∫–∞ –ì–∏–ª—å–¥–∏–∏</h2>
                <div class="sell-all-container">
                    <button class="btn-sell-all" onclick="sellAllLoot()">üí∞ –ü—Ä–æ–¥–∞—Ç—å –≤—Å—ë üí∞</button>
                </div>
                <div id="sellList" class="scrollable-list"></div>
            </div>

            <div class="shop-column">
                <h2>–ó–∞–≥–∞–¥–æ—á–Ω–∞—è –ª–∞–≤–∫–∞</h2>
                <div class="shop-card lootbox-card">
                    <h3>–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –°—É–Ω–¥—É–∫</h3>
                    <img src="images/ui/lootbox.png" class="lootbox-img" alt="–°—É–Ω–¥—É–∫">
                    <p>–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É!</p>
                    <button class="btn-buy" onclick="buyLootbox()">–ö—É–ø–∏—Ç—å (100 <img src="images/ui/coin.png" style="width:22px; vertical-align:middle;">)</button>
                </div>
            </div>
        </div>

        <div id="collectionScreen" class="screen collection-screen">
            <div class="collection-grid" id="collectionGrid"></div>
        </div>

    </div>

    <div id="transitionLayer" class="transition-layer">
        <video id="transVideo" src="video/transition.mp4" muted playsinline></video>
        <button class="skip-btn" onclick="skipTransition()">SKIP >></button>
    </div>

    <div id="devPanel" class="dev-panel" style="display: none;">
        <h3>üõ† GOD MODE üõ†</h3>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button onclick="devModKills(-10)">üíÄ -10 Kills</button>
            <button onclick="devModKills(10)">üíÄ +10 Kills</button>
        </div>
        <button onclick="devAddGold()">üí∞ +5000 –ó–æ–ª–æ—Ç–∞</button>
        <button onclick="devAddLoot()">ü•ö +10 –Ø–∏—Ü (–í—Å–µ—Ö)</button>
        <button onclick="devUnlockCollections()">üíé –í—Å–µ –ü—Ä–µ–¥–º–µ—Ç—ã</button>

        <button onclick="devReset()">‚ùå –°–±—Ä–æ—Å –ü—Ä–æ–≥—Ä–µ—Å—Å–∞</button>
        <button onclick="toggleDevPanel()" style="background: #555; margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <div id="evoModal" class="evo-modal-overlay" style="display: none;">
        <div class="evo-modal">
            <h2 id="evoTitle">–≠–≤–æ–ª—é—Ü–∏—è</h2>
            <p class="evo-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –ø—É—Ç—å —Ä–∞–∑–≤–∏—Ç–∏—è. –ü—É—Ç–∏ –Ω–∞–∑–∞–¥ –Ω–µ –±—É–¥–µ—Ç (–±–µ–∑ –∑–æ–ª–æ—Ç–∞)!</p>
            <div class="evo-choices" id="evoChoicesContainer"></div>
            <button class="evo-close-btn" onclick="closeEvoModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <div id="loreModal" class="evo-modal-overlay" style="display: none;" onclick="closeLoreModal()">
        <div class="evo-modal" style="border-color: #ffcc00; max-width: 400px;" onclick="event.stopPropagation()">
            <h2 id="loreTitle" style="color: #ffcc00;">–ù–∞–∑–≤–∞–Ω–∏–µ</h2>
            <img id="loreImg" src="" style="width: 120px; height: 120px; object-fit: contain; margin: 10px 0;">
            <p id="loreFlavor" style="font-style: italic; color: #aaa; margin-bottom: 15px;">"–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç..."</p>
            <div id="loreBuff" style="background: rgba(255, 215, 0, 0.1); padding: 10px; border-radius: 5px; color: #fff; font-weight: bold;">
                –≠—Ñ—Ñ–µ–∫—Ç
            </div>
            <button class="evo-close-btn" onclick="closeLoreModal()" style="margin-top: 15px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="game.js"></script>

</body>
</html>